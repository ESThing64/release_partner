{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useState,useEffect}from'react';import{useDispatch}from'react-redux';// material-ui\nimport{styled,useTheme}from'@mui/material/styles';import{Box,Grid,useMediaQuery}from'@mui/material';// project imports\nimport MailDrawer from'./MailDrawer';import MailDetails from'./MailDetails';import MailList from'./MailList';import axios from'utils/axios';import{SET_MENU}from'store/actions';import{appDrawerWidth as drawerWidth,gridSpacing}from'store/constant';// drawer content element\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Main=styled('main',{shouldForwardProp:function shouldForwardProp(prop){return prop!=='open';}})(function(_ref){var theme=_ref.theme,open=_ref.open;return _objectSpread(_defineProperty({width:'calc(100% - 320px)',flexGrow:1,paddingLeft:open?theme.spacing(3):0,transition:theme.transitions.create('margin',{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.leavingScreen}),marginLeft:\"-\".concat(drawerWidth,\"px\")},theme.breakpoints.down('xl'),{paddingLeft:0,marginLeft:0}),open&&{transition:theme.transitions.create('margin',{easing:theme.transitions.easing.easeOut,duration:theme.transitions.duration.enteringScreen}),marginLeft:0});});// ==============================|| MAIL MAIN PAGE ||============================== //\nvar MailPage=function MailPage(){var dispatch=useDispatch();var theme=useTheme();var matchDownSM=useMediaQuery(theme.breakpoints.down('xl'));var _useState=useState(false),_useState2=_slicedToArray(_useState,2),emailDetails=_useState2[0],setEmailDetailsValue=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedMail=_useState4[0],setSelectedMail=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),unreadCounts=_useState8[0],setUnreadCounts=_useState8[1];var getData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/mails/list');case 2:response=_context.sent;setData(response.data.mails);setUnreadCounts(response.data.unreadCount);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref2.apply(this,arguments);};}();var handleUserChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!data){_context2.next=5;break;}_context2.next=3;return axios.post('/api/mails/setRead',{id:data.id});case 3:_context2.next=5;return getData();case 5:setSelectedMail(data);setEmailDetailsValue(function(prev){return!prev;});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleUserChange(_x){return _ref3.apply(this,arguments);};}();var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),openMailSidebar=_useState10[0],setOpenMailSidebar=_useState10[1];var handleDrawerOpen=function handleDrawerOpen(){setOpenMailSidebar(function(prevState){return!prevState;});};useEffect(function(){if(matchDownSM){setOpenMailSidebar(false);}else{setOpenMailSidebar(true);}},[matchDownSM]);useEffect(function(){// hide left drawer when email app opens\ndispatch({type:SET_MENU,opened:false});getData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var _useState11=useState('all'),_useState12=_slicedToArray(_useState11,2),filter=_useState12[0],setFilter=_useState12[1];var handleFilter=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(string){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setEmailDetailsValue(false);setFilter(string);_context3.next=4;return axios.post('/api/mails/filter',{filter:string});case 4:response=_context3.sent;setData(response.data);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function handleFilter(_x2){return _ref4.apply(this,arguments);};}();var handleImportantChange=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(event,dataImportant){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!dataImportant){_context4.next=4;break;}_context4.next=3;return axios.post('/api/mails/setImportant',{id:dataImportant.id});case 3:handleFilter(filter);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function handleImportantChange(_x3,_x4){return _ref5.apply(this,arguments);};}();var handleStarredChange=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(event,dataStarred){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!dataStarred){_context5.next=4;break;}_context5.next=3;return axios.post('/api/mails/setStarred',{id:dataStarred.id});case 3:handleFilter(filter);case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function handleStarredChange(_x5,_x6){return _ref6.apply(this,arguments);};}();// search email using name\nvar _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),search=_useState14[0],setSearch=_useState14[1];var handleSearch=function handleSearch(event){var newString=event.target.value;setSearch(newString);if(newString){var newRows=data.filter(function(row){var matches=true;var properties=['name'];var containsQuery=false;properties.forEach(function(property){if(row.profile[property].toString().toLowerCase().includes(newString.toString().toLowerCase())){containsQuery=true;}});if(!containsQuery){matches=false;}return matches;});setData(newRows);}else{handleFilter(filter);}};return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex'},children:[/*#__PURE__*/_jsx(MailDrawer,{openMailSidebar:openMailSidebar,handleDrawerOpen:handleDrawerOpen,filter:filter,handleFilter:handleFilter,unreadCounts:unreadCounts}),/*#__PURE__*/_jsx(Main,{theme:theme,open:openMailSidebar,children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:gridSpacing,children:/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:emailDetails?/*#__PURE__*/_jsx(MailDetails,{data:selectedMail,handleUserDetails:function handleUserDetails(e,d){return handleUserChange(d);},handleImportantChange:handleImportantChange,handleStarredChange:handleStarredChange}):/*#__PURE__*/_jsx(MailList,{handleUserDetails:function handleUserDetails(e,d){return handleUserChange(d);},handleDrawerOpen:handleDrawerOpen,handleImportantChange:handleImportantChange,handleStarredChange:handleStarredChange,data:data,search:search,handleSearch:handleSearch})})})})]});};export default MailPage;","map":{"version":3,"sources":["/Users/johncoakley/development/projects/release_partner/src/views/application/mail/index.js"],"names":["useState","useEffect","useDispatch","styled","useTheme","Box","Grid","useMediaQuery","MailDrawer","MailDetails","MailList","axios","SET_MENU","appDrawerWidth","drawerWidth","gridSpacing","Main","shouldForwardProp","prop","theme","open","width","flexGrow","paddingLeft","spacing","transition","transitions","create","easing","sharp","duration","leavingScreen","marginLeft","breakpoints","down","easeOut","enteringScreen","MailPage","dispatch","matchDownSM","emailDetails","setEmailDetailsValue","selectedMail","setSelectedMail","data","setData","unreadCounts","setUnreadCounts","getData","get","response","mails","unreadCount","handleUserChange","post","id","prev","openMailSidebar","setOpenMailSidebar","handleDrawerOpen","prevState","type","opened","filter","setFilter","handleFilter","string","handleImportantChange","event","dataImportant","handleStarredChange","dataStarred","search","setSearch","handleSearch","newString","target","value","newRows","row","matches","properties","containsQuery","forEach","property","profile","toString","toLowerCase","includes","display","e","d"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n// material-ui\r\nimport { styled, useTheme } from '@mui/material/styles';\r\nimport { Box, Grid, useMediaQuery } from '@mui/material';\r\n\r\n// project imports\r\nimport MailDrawer from './MailDrawer';\r\nimport MailDetails from './MailDetails';\r\nimport MailList from './MailList';\r\nimport axios from 'utils/axios';\r\nimport { SET_MENU } from 'store/actions';\r\nimport { appDrawerWidth as drawerWidth, gridSpacing } from 'store/constant';\r\n\r\n// drawer content element\r\nconst Main = styled('main', { shouldForwardProp: (prop) => prop !== 'open' })(({ theme, open }) => ({\r\n    width: 'calc(100% - 320px)',\r\n    flexGrow: 1,\r\n    paddingLeft: open ? theme.spacing(3) : 0,\r\n    transition: theme.transitions.create('margin', {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen\r\n    }),\r\n    marginLeft: `-${drawerWidth}px`,\r\n    [theme.breakpoints.down('xl')]: {\r\n        paddingLeft: 0,\r\n        marginLeft: 0\r\n    },\r\n    ...(open && {\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen\r\n        }),\r\n        marginLeft: 0\r\n    })\r\n}));\r\n\r\n// ==============================|| MAIL MAIN PAGE ||============================== //\r\n\r\nconst MailPage = () => {\r\n    const dispatch = useDispatch();\r\n    const theme = useTheme();\r\n    const matchDownSM = useMediaQuery(theme.breakpoints.down('xl'));\r\n\r\n    const [emailDetails, setEmailDetailsValue] = useState(false);\r\n    const [selectedMail, setSelectedMail] = useState(null);\r\n\r\n    const [data, setData] = useState([]);\r\n    const [unreadCounts, setUnreadCounts] = useState();\r\n\r\n    const getData = async () => {\r\n        const response = await axios.get('/api/mails/list');\r\n        setData(response.data.mails);\r\n        setUnreadCounts(response.data.unreadCount);\r\n    };\r\n\r\n    const handleUserChange = async (data) => {\r\n        if (data) {\r\n            await axios.post('/api/mails/setRead', { id: data.id });\r\n            await getData();\r\n        }\r\n        setSelectedMail(data);\r\n        setEmailDetailsValue((prev) => !prev);\r\n    };\r\n\r\n    const [openMailSidebar, setOpenMailSidebar] = useState(true);\r\n    const handleDrawerOpen = () => {\r\n        setOpenMailSidebar((prevState) => !prevState);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (matchDownSM) {\r\n            setOpenMailSidebar(false);\r\n        } else {\r\n            setOpenMailSidebar(true);\r\n        }\r\n    }, [matchDownSM]);\r\n\r\n    useEffect(() => {\r\n        // hide left drawer when email app opens\r\n        dispatch({ type: SET_MENU, opened: false });\r\n        getData();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const [filter, setFilter] = useState('all');\r\n    const handleFilter = async (string) => {\r\n        setEmailDetailsValue(false);\r\n        setFilter(string);\r\n        const response = await axios.post('/api/mails/filter', {\r\n            filter: string\r\n        });\r\n        setData(response.data);\r\n    };\r\n\r\n    const handleImportantChange = async (event, dataImportant) => {\r\n        if (dataImportant) {\r\n            await axios.post('/api/mails/setImportant', { id: dataImportant.id });\r\n            handleFilter(filter);\r\n        }\r\n    };\r\n\r\n    const handleStarredChange = async (event, dataStarred) => {\r\n        if (dataStarred) {\r\n            await axios.post('/api/mails/setStarred', { id: dataStarred.id });\r\n            handleFilter(filter);\r\n        }\r\n    };\r\n\r\n    // search email using name\r\n    const [search, setSearch] = useState('');\r\n    const handleSearch = (event) => {\r\n        const newString = event.target.value;\r\n        setSearch(newString);\r\n\r\n        if (newString) {\r\n            const newRows = data.filter((row) => {\r\n                let matches = true;\r\n\r\n                const properties = ['name'];\r\n                let containsQuery = false;\r\n\r\n                properties.forEach((property) => {\r\n                    if (row.profile[property].toString().toLowerCase().includes(newString.toString().toLowerCase())) {\r\n                        containsQuery = true;\r\n                    }\r\n                });\r\n\r\n                if (!containsQuery) {\r\n                    matches = false;\r\n                }\r\n                return matches;\r\n            });\r\n            setData(newRows);\r\n        } else {\r\n            handleFilter(filter);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Box sx={{ display: 'flex' }}>\r\n            <MailDrawer\r\n                openMailSidebar={openMailSidebar}\r\n                handleDrawerOpen={handleDrawerOpen}\r\n                filter={filter}\r\n                handleFilter={handleFilter}\r\n                unreadCounts={unreadCounts}\r\n            />\r\n            <Main theme={theme} open={openMailSidebar}>\r\n                <Grid container spacing={gridSpacing}>\r\n                    <Grid item xs={12}>\r\n                        {/* mail details & list */}\r\n                        {emailDetails ? (\r\n                            <MailDetails\r\n                                data={selectedMail}\r\n                                handleUserDetails={(e, d) => handleUserChange(d)}\r\n                                handleImportantChange={handleImportantChange}\r\n                                handleStarredChange={handleStarredChange}\r\n                            />\r\n                        ) : (\r\n                            <MailList\r\n                                handleUserDetails={(e, d) => handleUserChange(d)}\r\n                                handleDrawerOpen={handleDrawerOpen}\r\n                                handleImportantChange={handleImportantChange}\r\n                                handleStarredChange={handleStarredChange}\r\n                                data={data}\r\n                                search={search}\r\n                                handleSearch={handleSearch}\r\n                            />\r\n                        )}\r\n                    </Grid>\r\n                </Grid>\r\n            </Main>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default MailPage;\r\n"]},"metadata":{},"sourceType":"module"}