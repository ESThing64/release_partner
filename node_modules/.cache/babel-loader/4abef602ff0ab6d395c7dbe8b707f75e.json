{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"children\",\"value\",\"index\"];import{useState,useEffect}from'react';import{Link,useNavigate,useParams}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';// material-ui\nimport{Box,Grid,Stack,Tab,Tabs,Typography}from'@mui/material';// project imports\nimport ProductImages from'./ProductImages';import ProductInfo from'./ProductInfo';import ProductDescription from'./ProductDescription';import ProductReview from'./ProductReview';import RelatedProducts from'./RelatedProducts';import MainCard from'ui-component/cards/MainCard';import FloatingCart from'ui-component/cards/FloatingCart';import Chip from'ui-component/extended/Chip';import axios from'utils/axios';import{RESET_CART}from'store/actions';import{gridSpacing}from'store/constant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TabPanel(_ref){var children=_ref.children,value=_ref.value,index=_ref.index,other=_objectWithoutProperties(_ref,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index,id:\"product-details-tabpanel-\".concat(index),\"aria-labelledby\":\"product-details-tab-\".concat(index)},other),{},{children:value===index&&/*#__PURE__*/_jsx(Box,{children:children})}));}function a11yProps(index){return{id:\"product-details-tab-\".concat(index),'aria-controls':\"product-details-tabpanel-\".concat(index)};}var ProductDetails=function ProductDetails(){var _useParams=useParams(),id=_useParams.id;var history=useNavigate();var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});// product description tabs\nvar _useState=useState(0),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var handleChange=function handleChange(event,newValue){setValue(newValue);};var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),product=_useState4[0],setProduct=_useState4[1];var getProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/api/product/details',{id:id});case 2:response=_context.sent;setProduct(response.data.results);if(id==='default'){history(\"/e-commerce/product-details/\".concat(response.data.results.id));}case 5:case\"end\":return _context.stop();}}},_callee);}));return function getProduct(){return _ref2.apply(this,arguments);};}();useEffect(function(){getProduct();// clear cart if complete order\nif(cart.checkout.step>2){dispatch({type:RESET_CART});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsxs(Grid,{container:true,alignItems:\"center\",justifyContent:\"center\",spacing:gridSpacing,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,lg:10,children:/*#__PURE__*/_jsx(MainCard,{children:product&&/*#__PURE__*/_jsxs(Grid,{container:true,spacing:gridSpacing,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(ProductImages,{product:product})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(ProductInfo,{product:product})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsxs(Tabs,{value:value,indicatorColor:\"primary\",onChange:handleChange,sx:{},\"aria-label\":\"product description tabs example\",variant:\"scrollable\",children:[/*#__PURE__*/_jsx(Tab,_objectSpread({component:Link,to:\"#\",label:\"Description\"},a11yProps(0))),/*#__PURE__*/_jsx(Tab,_objectSpread({component:Link,to:\"#\",label:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",children:[\"Reviews\",' ',/*#__PURE__*/_jsx(Chip,{label:String(product.salePrice),size:\"small\",chipcolor:\"secondary\",sx:{ml:1.5}})]})},a11yProps(1)))]}),/*#__PURE__*/_jsx(TabPanel,{value:value,index:0,children:/*#__PURE__*/_jsx(ProductDescription,{})}),/*#__PURE__*/_jsx(TabPanel,{value:value,index:1,children:/*#__PURE__*/_jsx(ProductReview,{product:product})})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,lg:10,sx:{mt:3},children:/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Related Products\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:11,lg:10,children:/*#__PURE__*/_jsx(RelatedProducts,{id:id})}),/*#__PURE__*/_jsx(FloatingCart,{})]});};export default ProductDetails;","map":{"version":3,"sources":["/Users/johncoakley/development/projects/release_partner/src/views/application/e-commerce/ProductDetails/index.js"],"names":["useState","useEffect","Link","useNavigate","useParams","useDispatch","useSelector","Box","Grid","Stack","Tab","Tabs","Typography","ProductImages","ProductInfo","ProductDescription","ProductReview","RelatedProducts","MainCard","FloatingCart","Chip","axios","RESET_CART","gridSpacing","TabPanel","children","value","index","other","a11yProps","id","ProductDetails","history","dispatch","cart","state","setValue","handleChange","event","newValue","product","setProduct","getProduct","post","response","data","results","checkout","step","type","String","salePrice","ml","mt"],"mappings":"i6BACA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,IAAT,CAAeC,WAAf,CAA4BC,SAA5B,KAA6C,kBAA7C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CAEA;AACA,OAASC,GAAT,CAAcC,IAAd,CAAoBC,KAApB,CAA2BC,GAA3B,CAAgCC,IAAhC,CAAsCC,UAAtC,KAAwD,eAAxD,CAEA;AACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,kBAAP,KAA+B,sBAA/B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,MAAOC,CAAAA,QAAP,KAAqB,6BAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,iCAAzB,CACA,MAAOC,CAAAA,IAAP,KAAiB,4BAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,OAASC,UAAT,KAA2B,eAA3B,CACA,OAASC,WAAT,KAA4B,gBAA5B,C,wFAEA,QAASC,CAAAA,QAAT,MAAwD,IAApCC,CAAAA,QAAoC,MAApCA,QAAoC,CAA1BC,KAA0B,MAA1BA,KAA0B,CAAnBC,KAAmB,MAAnBA,KAAmB,CAATC,KAAS,0CACpD,mBACI,wCACI,IAAI,CAAC,UADT,CAEI,MAAM,CAAEF,KAAK,GAAKC,KAFtB,CAGI,EAAE,oCAA8BA,KAA9B,CAHN,CAII,gDAAwCA,KAAxC,CAJJ,EAKQC,KALR,eAOKF,KAAK,GAAKC,KAAV,eAAmB,KAAC,GAAD,WAAMF,QAAN,EAPxB,GADJ,CAWH,CAQD,QAASI,CAAAA,SAAT,CAAmBF,KAAnB,CAA0B,CACtB,MAAO,CACHG,EAAE,+BAAyBH,KAAzB,CADC,CAEH,mDAA6CA,KAA7C,CAFG,CAAP,CAIH,CAED,GAAMI,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB,eAAe3B,SAAS,EAAxB,CAAQ0B,EAAR,YAAQA,EAAR,CACA,GAAME,CAAAA,OAAO,CAAG7B,WAAW,EAA3B,CAEA,GAAM8B,CAAAA,QAAQ,CAAG5B,WAAW,EAA5B,CACA,GAAM6B,CAAAA,IAAI,CAAG5B,WAAW,CAAC,SAAC6B,KAAD,QAAWA,CAAAA,KAAK,CAACD,IAAjB,EAAD,CAAxB,CAEA;AACA,cAA0BlC,QAAQ,CAAC,CAAD,CAAlC,wCAAO0B,KAAP,eAAcU,QAAd,eAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAQC,QAAR,CAAqB,CACtCH,QAAQ,CAACG,QAAD,CAAR,CACH,CAFD,CAIA,eAA8BvC,QAAQ,CAAC,IAAD,CAAtC,yCAAOwC,OAAP,eAAgBC,UAAhB,eACA,GAAMC,CAAAA,UAAU,2FAAG,sKACQrB,CAAAA,KAAK,CAACsB,IAAN,CAAW,sBAAX,CAAmC,CACtDb,EAAE,CAAFA,EADsD,CAAnC,CADR,QACTc,QADS,eAIfH,UAAU,CAACG,QAAQ,CAACC,IAAT,CAAcC,OAAf,CAAV,CACA,GAAIhB,EAAE,GAAK,SAAX,CAAsB,CAClBE,OAAO,uCAAgCY,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAsBhB,EAAtD,EAAP,CACH,CAPc,sDAAH,kBAAVY,CAAAA,UAAU,2CAAhB,CAUAzC,SAAS,CAAC,UAAM,CACZyC,UAAU,GAEV;AACA,GAAIR,IAAI,CAACa,QAAL,CAAcC,IAAd,CAAqB,CAAzB,CAA4B,CACxBf,QAAQ,CAAC,CAAEgB,IAAI,CAAE3B,UAAR,CAAD,CAAR,CACH,CAED;AACH,CATQ,CASN,EATM,CAAT,CAWA,mBACI,MAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,UAAU,CAAC,QAA3B,CAAoC,cAAc,CAAC,QAAnD,CAA4D,OAAO,CAAEC,WAArE,wBACI,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,EAAvB,uBACI,KAAC,QAAD,WACKiB,OAAO,eACJ,MAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAEjB,WAAzB,wBACI,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,uBACI,KAAC,aAAD,EAAe,OAAO,CAAEiB,OAAxB,EADJ,EADJ,cAII,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,uBACI,KAAC,WAAD,EAAa,OAAO,CAAEA,OAAtB,EADJ,EAJJ,cAOI,MAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,wBACI,MAAC,IAAD,EACI,KAAK,CAAEd,KADX,CAEI,cAAc,CAAC,SAFnB,CAGI,QAAQ,CAAEW,YAHd,CAII,EAAE,CAAE,EAJR,CAKI,aAAW,kCALf,CAMI,OAAO,CAAC,YANZ,wBAQI,KAAC,GAAD,gBAAK,SAAS,CAAEnC,IAAhB,CAAsB,EAAE,CAAC,GAAzB,CAA6B,KAAK,CAAC,aAAnC,EAAqD2B,SAAS,CAAC,CAAD,CAA9D,EARJ,cASI,KAAC,GAAD,gBACI,SAAS,CAAE3B,IADf,CAEI,EAAE,CAAC,GAFP,CAGI,KAAK,cACD,MAAC,KAAD,EAAO,SAAS,CAAC,KAAjB,CAAuB,UAAU,CAAC,QAAlC,qBACY,GADZ,cAEI,KAAC,IAAD,EACI,KAAK,CAAEgD,MAAM,CAACV,OAAO,CAACW,SAAT,CADjB,CAEI,IAAI,CAAC,OAFT,CAGI,SAAS,CAAC,WAHd,CAII,EAAE,CAAE,CAAEC,EAAE,CAAE,GAAN,CAJR,EAFJ,GAJR,EAcQvB,SAAS,CAAC,CAAD,CAdjB,EATJ,GADJ,cA2BI,KAAC,QAAD,EAAU,KAAK,CAAEH,KAAjB,CAAwB,KAAK,CAAE,CAA/B,uBACI,KAAC,kBAAD,IADJ,EA3BJ,cA8BI,KAAC,QAAD,EAAU,KAAK,CAAEA,KAAjB,CAAwB,KAAK,CAAE,CAA/B,uBACI,KAAC,aAAD,EAAe,OAAO,CAAEc,OAAxB,EADJ,EA9BJ,GAPJ,GAFR,EADJ,EADJ,cAiDI,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,EAAvB,CAA2B,EAAE,CAAE,CAAEa,EAAE,CAAE,CAAN,CAA/B,uBACI,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,8BADJ,EAjDJ,cAoDI,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,EAAvB,uBACI,KAAC,eAAD,EAAiB,EAAE,CAAEvB,EAArB,EADJ,EApDJ,cAuDI,KAAC,YAAD,IAvDJ,GADJ,CA2DH,CA/FD,CAiGA,cAAeC,CAAAA,cAAf","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n// material-ui\r\nimport { Box, Grid, Stack, Tab, Tabs, Typography } from '@mui/material';\r\n\r\n// project imports\r\nimport ProductImages from './ProductImages';\r\nimport ProductInfo from './ProductInfo';\r\nimport ProductDescription from './ProductDescription';\r\nimport ProductReview from './ProductReview';\r\nimport RelatedProducts from './RelatedProducts';\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport FloatingCart from 'ui-component/cards/FloatingCart';\r\nimport Chip from 'ui-component/extended/Chip';\r\nimport axios from 'utils/axios';\r\nimport { RESET_CART } from 'store/actions';\r\nimport { gridSpacing } from 'store/constant';\r\n\r\nfunction TabPanel({ children, value, index, ...other }) {\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`product-details-tabpanel-${index}`}\r\n            aria-labelledby={`product-details-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && <Box>{children}</Box>}\r\n        </div>\r\n    );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.any.isRequired,\r\n    value: PropTypes.any.isRequired\r\n};\r\n\r\nfunction a11yProps(index) {\r\n    return {\r\n        id: `product-details-tab-${index}`,\r\n        'aria-controls': `product-details-tabpanel-${index}`\r\n    };\r\n}\r\n\r\nconst ProductDetails = () => {\r\n    const { id } = useParams();\r\n    const history = useNavigate();\r\n\r\n    const dispatch = useDispatch();\r\n    const cart = useSelector((state) => state.cart);\r\n\r\n    // product description tabs\r\n    const [value, setValue] = useState(0);\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setValue(newValue);\r\n    };\r\n\r\n    const [product, setProduct] = useState(null);\r\n    const getProduct = async () => {\r\n        const response = await axios.post('/api/product/details', {\r\n            id\r\n        });\r\n        setProduct(response.data.results);\r\n        if (id === 'default') {\r\n            history(`/e-commerce/product-details/${response.data.results.id}`);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        getProduct();\r\n\r\n        // clear cart if complete order\r\n        if (cart.checkout.step > 2) {\r\n            dispatch({ type: RESET_CART });\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    return (\r\n        <Grid container alignItems=\"center\" justifyContent=\"center\" spacing={gridSpacing}>\r\n            <Grid item xs={12} lg={10}>\r\n                <MainCard>\r\n                    {product && (\r\n                        <Grid container spacing={gridSpacing}>\r\n                            <Grid item xs={12} md={6}>\r\n                                <ProductImages product={product} />\r\n                            </Grid>\r\n                            <Grid item xs={12} md={6}>\r\n                                <ProductInfo product={product} />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <Tabs\r\n                                    value={value}\r\n                                    indicatorColor=\"primary\"\r\n                                    onChange={handleChange}\r\n                                    sx={{}}\r\n                                    aria-label=\"product description tabs example\"\r\n                                    variant=\"scrollable\"\r\n                                >\r\n                                    <Tab component={Link} to=\"#\" label=\"Description\" {...a11yProps(0)} />\r\n                                    <Tab\r\n                                        component={Link}\r\n                                        to=\"#\"\r\n                                        label={\r\n                                            <Stack direction=\"row\" alignItems=\"center\">\r\n                                                Reviews{' '}\r\n                                                <Chip\r\n                                                    label={String(product.salePrice)}\r\n                                                    size=\"small\"\r\n                                                    chipcolor=\"secondary\"\r\n                                                    sx={{ ml: 1.5 }}\r\n                                                />\r\n                                            </Stack>\r\n                                        }\r\n                                        {...a11yProps(1)}\r\n                                    />\r\n                                </Tabs>\r\n                                <TabPanel value={value} index={0}>\r\n                                    <ProductDescription />\r\n                                </TabPanel>\r\n                                <TabPanel value={value} index={1}>\r\n                                    <ProductReview product={product} />\r\n                                </TabPanel>\r\n                            </Grid>\r\n                        </Grid>\r\n                    )}\r\n                </MainCard>\r\n            </Grid>\r\n            <Grid item xs={12} lg={10} sx={{ mt: 3 }}>\r\n                <Typography variant=\"h2\">Related Products</Typography>\r\n            </Grid>\r\n            <Grid item xs={11} lg={10}>\r\n                <RelatedProducts id={id} />\r\n            </Grid>\r\n            <FloatingCart />\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default ProductDetails;\r\n"]},"metadata":{},"sourceType":"module"}