{"ast":null,"code":"import _toConsumableArray from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import PropTypes from'prop-types';import{useState,useEffect}from'react';import{useDispatch}from'react-redux';// material-ui\nimport{useTheme,styled}from'@mui/material/styles';import{Box,CardContent,ClickAwayListener,Divider,Grid,IconButton,Menu,MenuItem,Popper,TextField,Typography,useMediaQuery}from'@mui/material';// third-party\nimport PerfectScrollbar from'react-perfect-scrollbar';import Picker,{SKIN_TONE_MEDIUM_DARK}from'emoji-picker-react';// project imports\nimport UserDetails from'./UserDetails';import ChatDrawer from'./ChatDrawer';import ChartHistory from'./ChartHistory';import AvatarStatus from'./AvatarStatus';import MainCard from'ui-component/cards/MainCard';import Avatar from'ui-component/extended/Avatar';import axios from'utils/axios';import{SET_MENU}from'store/actions';import{appDrawerWidth as drawerWidth,gridSpacing}from'store/constant';// assets\nimport AttachmentTwoToneIcon from'@mui/icons-material/AttachmentTwoTone';import MenuRoundedIcon from'@mui/icons-material/MenuRounded';import MoreHorizTwoToneIcon from'@mui/icons-material/MoreHorizTwoTone';import ErrorTwoToneIcon from'@mui/icons-material/ErrorTwoTone';import VideoCallTwoToneIcon from'@mui/icons-material/VideoCallTwoTone';import CallTwoToneIcon from'@mui/icons-material/CallTwoTone';import SendTwoToneIcon from'@mui/icons-material/SendTwoTone';import MoodTwoToneIcon from'@mui/icons-material/MoodTwoTone';import HighlightOffTwoToneIcon from'@mui/icons-material/HighlightOffTwoTone';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var avatarImage=require.context('assets/images/users',true);// drawer content element\nvar Main=styled('main',{shouldForwardProp:function shouldForwardProp(prop){return prop!=='open';}})(function(_ref){var theme=_ref.theme,open=_ref.open;return _objectSpread(_defineProperty({flexGrow:1,paddingLeft:open?theme.spacing(3):0,transition:theme.transitions.create('margin',{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.leavingScreen}),marginLeft:\"-\".concat(drawerWidth,\"px\")},theme.breakpoints.down('lg'),{paddingLeft:0,marginLeft:0}),open&&{transition:theme.transitions.create('margin',{easing:theme.transitions.easing.easeOut,duration:theme.transitions.duration.enteringScreen}),marginLeft:0});});// ==============================|| APPLICATION CHAT ||============================== //\nvar ChatMainPage=function ChatMainPage(){var theme=useTheme();var dispatch=useDispatch();var matchDownSM=useMediaQuery(theme.breakpoints.down('lg'));// handle right sidebar dropdown menu\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),anchorEl=_useState2[0],setAnchorEl=_useState2[1];var handleClickSort=function handleClickSort(event){setAnchorEl(event===null||event===void 0?void 0:event.currentTarget);};var handleCloseSort=function handleCloseSort(){setAnchorEl(null);};// set chat details page open when user is selected from sidebar\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),emailDetails=_useState4[0],setEmailDetails=_useState4[1];var handleUserChange=function handleUserChange(){setEmailDetails(function(prev){return!prev;});};// toggle sidebar\nvar _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),openChatDrawer=_useState6[0],setOpenChatDrawer=_useState6[1];var handleDrawerOpen=function handleDrawerOpen(){setOpenChatDrawer(function(prevState){return!prevState;});};// close sidebar when widow size below 'md' breakpoint\nuseEffect(function(){setOpenChatDrawer(!matchDownSM);},[matchDownSM]);// fetch user details of current user\nvar _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];var getUserData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/api/chat/users/id',{id:1});case 2:response=_context.sent;setUser(response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getUserData(){return _ref2.apply(this,arguments);};}();useEffect(function(){// hide left drawer when email app opens\ndispatch({type:SET_MENU,opened:false});getUserData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// fetch chat history for selected user\nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),data=_useState10[0],setData=_useState10[1];var getData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userData){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/api/chat/filter',{user:userData.name});case 2:response=_context2.sent;setData(response.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getData(_x){return _ref3.apply(this,arguments);};}();useEffect(function(){getData(user);},[user]);// handle new message form\nvar _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),message=_useState12[0],setMessage=_useState12[1];var handleOnSend=function handleOnSend(){var d=new Date();setMessage('');var newMessage={from:'User1',to:user.name,text:message,time:d.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})};setData(function(prevState){return[].concat(_toConsumableArray(prevState),[newMessage]);});axios.post('/api/chat/insert',_objectSpread({},newMessage));};var handleEnter=function handleEnter(event){if((event===null||event===void 0?void 0:event.key)!=='Enter'){return;}handleOnSend();};// handle emoji\nvar onEmojiClick=function onEmojiClick(event,emojiObject){setMessage(message+emojiObject.emoji);};var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),anchorElEmoji=_useState14[0],setAnchorElEmoji=_useState14[1];/** No single type can cater for all elements */var handleOnEmojiButtonClick=function handleOnEmojiButtonClick(event){setAnchorElEmoji(anchorElEmoji?null:event===null||event===void 0?void 0:event.currentTarget);};var emojiOpen=Boolean(anchorElEmoji);var emojiId=emojiOpen?'simple-popper':undefined;var handleCloseEmoji=function handleCloseEmoji(){setAnchorElEmoji(null);};if(!user)return/*#__PURE__*/_jsx(Typography,{children:\"Loading...\"});return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex'},children:[/*#__PURE__*/_jsx(ChatDrawer,{openChatDrawer:openChatDrawer,handleDrawerOpen:handleDrawerOpen,setUser:setUser}),/*#__PURE__*/_jsx(Main,{theme:theme,open:openChatDrawer,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:gridSpacing,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:true,zeroMinWidth:true,sx:{display:emailDetails?{xs:'none',sm:'flex'}:'flex'},children:/*#__PURE__*/_jsx(MainCard,{sx:{bgcolor:theme.palette.mode==='dark'?'dark.main':'grey.50'},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:gridSpacing,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsxs(Grid,{container:true,alignItems:\"center\",spacing:0.5,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(IconButton,{onClick:handleDrawerOpen,size:\"large\",children:/*#__PURE__*/_jsx(MenuRoundedIcon,{})})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,alignItems:\"center\",sx:{flexWrap:'nowrap'},children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Avatar,{alt:user.name,src:user.avatar&&avatarImage(\"./\".concat(user.avatar)).default})}),/*#__PURE__*/_jsx(Grid,{item:true,sm:true,zeroMinWidth:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:0,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",component:\"div\",children:[user.name,' ',user.online_status&&/*#__PURE__*/_jsx(AvatarStatus,{status:user.online_status})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",children:[\"Last seen \",user.lastMessage]})})]})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,sm:true,zeroMinWidth:true}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(IconButton,{size:\"large\",children:/*#__PURE__*/_jsx(CallTwoToneIcon,{})})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(IconButton,{size:\"large\",children:/*#__PURE__*/_jsx(VideoCallTwoToneIcon,{})})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(IconButton,{onClick:handleUserChange,size:\"large\",children:/*#__PURE__*/_jsx(ErrorTwoToneIcon,{})})}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(IconButton,{onClick:handleClickSort,size:\"large\",children:/*#__PURE__*/_jsx(MoreHorizTwoToneIcon,{})}),/*#__PURE__*/_jsxs(Menu,{id:\"simple-menu\",anchorEl:anchorEl,keepMounted:true,open:Boolean(anchorEl),onClose:handleCloseSort,anchorOrigin:{vertical:'bottom',horizontal:'right'},transformOrigin:{vertical:'top',horizontal:'right'},children:[/*#__PURE__*/_jsx(MenuItem,{onClick:handleCloseSort,children:\"Name\"}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleCloseSort,children:\"Date\"}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleCloseSort,children:\"Ratting\"}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleCloseSort,children:\"Unread\"})]})]})]}),/*#__PURE__*/_jsx(Divider,{sx:{mt:theme.spacing(2)}})]}),/*#__PURE__*/_jsx(PerfectScrollbar,{style:{width:'100%',height:'calc(100vh - 440px)',overflowX:'hidden',minHeight:525},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(ChartHistory,{theme:theme,handleUserDetails:handleUserChange,handleDrawerOpen:handleDrawerOpen,user:user,data:data})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,alignItems:\"center\",children:[/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(IconButton,{ref:anchorElEmoji,\"aria-describedby\":emojiId,onClick:handleOnEmojiButtonClick,size:\"large\",children:/*#__PURE__*/_jsx(MoodTwoToneIcon,{})}),/*#__PURE__*/_jsx(Popper,{id:emojiId,open:emojiOpen,anchorEl:anchorElEmoji,disablePortal:true,popperOptions:{modifiers:[{name:'offset',options:{offset:[-20,20]}}]},children:/*#__PURE__*/_jsx(ClickAwayListener,{onClickAway:handleCloseEmoji,children:/*#__PURE__*/_jsx(MainCard,{elevation:8,content:false,children:/*#__PURE__*/_jsx(Picker,{onEmojiClick:onEmojiClick,skinTone:SKIN_TONE_MEDIUM_DARK,disableAutoFocus:true})})})})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:true,zeroMinWidth:true,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Type a Message\",value:message,onChange:function onChange(e){return setMessage(e.target.value);},onKeyPress:handleEnter})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(IconButton,{size:\"large\",children:/*#__PURE__*/_jsx(AttachmentTwoToneIcon,{})})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(IconButton,{color:\"primary\",onClick:handleOnSend,size:\"large\",children:/*#__PURE__*/_jsx(SendTwoToneIcon,{})})})]})})]})})}),emailDetails&&/*#__PURE__*/_jsxs(Grid,{item:true,sx:{margin:{xs:'0 auto',md:'initial'}},children:[/*#__PURE__*/_jsx(Box,{sx:{display:{xs:'block',sm:'none',textAlign:'right'}},children:/*#__PURE__*/_jsx(IconButton,{onClick:handleUserChange,sx:{mb:-5},size:\"large\",children:/*#__PURE__*/_jsx(HighlightOffTwoToneIcon,{})})}),/*#__PURE__*/_jsx(UserDetails,{user:user})]})]})})]});};ChatDrawer.propTypes={handleDrawerOpen:PropTypes.func,openChatDrawer:PropTypes.bool,setUser:PropTypes.func};export default ChatMainPage;","map":{"version":3,"sources":["/Users/johncoakley/development/projects/release_partner/src/views/application/chat/index.js"],"names":["PropTypes","useState","useEffect","useDispatch","useTheme","styled","Box","CardContent","ClickAwayListener","Divider","Grid","IconButton","Menu","MenuItem","Popper","TextField","Typography","useMediaQuery","PerfectScrollbar","Picker","SKIN_TONE_MEDIUM_DARK","UserDetails","ChatDrawer","ChartHistory","AvatarStatus","MainCard","Avatar","axios","SET_MENU","appDrawerWidth","drawerWidth","gridSpacing","AttachmentTwoToneIcon","MenuRoundedIcon","MoreHorizTwoToneIcon","ErrorTwoToneIcon","VideoCallTwoToneIcon","CallTwoToneIcon","SendTwoToneIcon","MoodTwoToneIcon","HighlightOffTwoToneIcon","avatarImage","require","context","Main","shouldForwardProp","prop","theme","open","flexGrow","paddingLeft","spacing","transition","transitions","create","easing","sharp","duration","leavingScreen","marginLeft","breakpoints","down","easeOut","enteringScreen","ChatMainPage","dispatch","matchDownSM","anchorEl","setAnchorEl","handleClickSort","event","currentTarget","handleCloseSort","emailDetails","setEmailDetails","handleUserChange","prev","openChatDrawer","setOpenChatDrawer","handleDrawerOpen","prevState","user","setUser","getUserData","post","id","response","data","type","opened","setData","getData","userData","name","message","setMessage","handleOnSend","d","Date","newMessage","from","to","text","time","toLocaleTimeString","hour","minute","handleEnter","key","onEmojiClick","emojiObject","emoji","anchorElEmoji","setAnchorElEmoji","handleOnEmojiButtonClick","emojiOpen","Boolean","emojiId","undefined","handleCloseEmoji","display","xs","sm","bgcolor","palette","mode","flexWrap","avatar","default","online_status","lastMessage","vertical","horizontal","mt","width","height","overflowX","minHeight","modifiers","options","offset","e","target","value","margin","md","textAlign","mb","propTypes","func","bool"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n// material-ui\r\nimport { useTheme, styled } from '@mui/material/styles';\r\nimport {\r\n    Box,\r\n    CardContent,\r\n    ClickAwayListener,\r\n    Divider,\r\n    Grid,\r\n    IconButton,\r\n    Menu,\r\n    MenuItem,\r\n    Popper,\r\n    TextField,\r\n    Typography,\r\n    useMediaQuery\r\n} from '@mui/material';\r\n\r\n// third-party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport Picker, { SKIN_TONE_MEDIUM_DARK } from 'emoji-picker-react';\r\n\r\n// project imports\r\nimport UserDetails from './UserDetails';\r\nimport ChatDrawer from './ChatDrawer';\r\nimport ChartHistory from './ChartHistory';\r\nimport AvatarStatus from './AvatarStatus';\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport Avatar from 'ui-component/extended/Avatar';\r\nimport axios from 'utils/axios';\r\nimport { SET_MENU } from 'store/actions';\r\nimport { appDrawerWidth as drawerWidth, gridSpacing } from 'store/constant';\r\n\r\n// assets\r\nimport AttachmentTwoToneIcon from '@mui/icons-material/AttachmentTwoTone';\r\nimport MenuRoundedIcon from '@mui/icons-material/MenuRounded';\r\nimport MoreHorizTwoToneIcon from '@mui/icons-material/MoreHorizTwoTone';\r\nimport ErrorTwoToneIcon from '@mui/icons-material/ErrorTwoTone';\r\nimport VideoCallTwoToneIcon from '@mui/icons-material/VideoCallTwoTone';\r\nimport CallTwoToneIcon from '@mui/icons-material/CallTwoTone';\r\nimport SendTwoToneIcon from '@mui/icons-material/SendTwoTone';\r\nimport MoodTwoToneIcon from '@mui/icons-material/MoodTwoTone';\r\nimport HighlightOffTwoToneIcon from '@mui/icons-material/HighlightOffTwoTone';\r\n\r\nconst avatarImage = require.context('assets/images/users', true);\r\n\r\n// drawer content element\r\nconst Main = styled('main', { shouldForwardProp: (prop) => prop !== 'open' })(({ theme, open }) => ({\r\n    flexGrow: 1,\r\n    paddingLeft: open ? theme.spacing(3) : 0,\r\n    transition: theme.transitions.create('margin', {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen\r\n    }),\r\n    marginLeft: `-${drawerWidth}px`,\r\n    [theme.breakpoints.down('lg')]: {\r\n        paddingLeft: 0,\r\n        marginLeft: 0\r\n    },\r\n    ...(open && {\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen\r\n        }),\r\n        marginLeft: 0\r\n    })\r\n}));\r\n\r\n// ==============================|| APPLICATION CHAT ||============================== //\r\n\r\nconst ChatMainPage = () => {\r\n    const theme = useTheme();\r\n    const dispatch = useDispatch();\r\n\r\n    const matchDownSM = useMediaQuery(theme.breakpoints.down('lg'));\r\n\r\n    // handle right sidebar dropdown menu\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const handleClickSort = (event) => {\r\n        setAnchorEl(event?.currentTarget);\r\n    };\r\n\r\n    const handleCloseSort = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    // set chat details page open when user is selected from sidebar\r\n    const [emailDetails, setEmailDetails] = useState(false);\r\n    const handleUserChange = () => {\r\n        setEmailDetails((prev) => !prev);\r\n    };\r\n\r\n    // toggle sidebar\r\n    const [openChatDrawer, setOpenChatDrawer] = useState(true);\r\n    const handleDrawerOpen = () => {\r\n        setOpenChatDrawer((prevState) => !prevState);\r\n    };\r\n\r\n    // close sidebar when widow size below 'md' breakpoint\r\n    useEffect(() => {\r\n        setOpenChatDrawer(!matchDownSM);\r\n    }, [matchDownSM]);\r\n\r\n    // fetch user details of current user\r\n    const [user, setUser] = useState({});\r\n    const getUserData = async () => {\r\n        const response = await axios.post('/api/chat/users/id', { id: 1 });\r\n        setUser(response.data);\r\n    };\r\n\r\n    useEffect(() => {\r\n        // hide left drawer when email app opens\r\n        dispatch({ type: SET_MENU, opened: false });\r\n        getUserData();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    // fetch chat history for selected user\r\n    const [data, setData] = useState([]);\r\n    const getData = async (userData) => {\r\n        const response = await axios.post('/api/chat/filter', {\r\n            user: userData.name\r\n        });\r\n        setData(response.data);\r\n    };\r\n\r\n    useEffect(() => {\r\n        getData(user);\r\n    }, [user]);\r\n\r\n    // handle new message form\r\n    const [message, setMessage] = useState('');\r\n    const handleOnSend = () => {\r\n        const d = new Date();\r\n        setMessage('');\r\n        const newMessage = {\r\n            from: 'User1',\r\n            to: user.name,\r\n            text: message,\r\n            time: d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n        };\r\n        setData((prevState) => [...prevState, newMessage]);\r\n        axios.post('/api/chat/insert', {\r\n            ...newMessage\r\n        });\r\n    };\r\n\r\n    const handleEnter = (event) => {\r\n        if (event?.key !== 'Enter') {\r\n            return;\r\n        }\r\n        handleOnSend();\r\n    };\r\n\r\n    // handle emoji\r\n    const onEmojiClick = (event, emojiObject) => {\r\n        setMessage(message + emojiObject.emoji);\r\n    };\r\n\r\n    const [anchorElEmoji, setAnchorElEmoji] = useState(); /** No single type can cater for all elements */\r\n    const handleOnEmojiButtonClick = (event) => {\r\n        setAnchorElEmoji(anchorElEmoji ? null : event?.currentTarget);\r\n    };\r\n\r\n    const emojiOpen = Boolean(anchorElEmoji);\r\n    const emojiId = emojiOpen ? 'simple-popper' : undefined;\r\n    const handleCloseEmoji = () => {\r\n        setAnchorElEmoji(null);\r\n    };\r\n\r\n    if (!user) return <Typography>Loading...</Typography>;\r\n\r\n    return (\r\n        <Box sx={{ display: 'flex' }}>\r\n            <ChatDrawer openChatDrawer={openChatDrawer} handleDrawerOpen={handleDrawerOpen} setUser={setUser} />\r\n            <Main theme={theme} open={openChatDrawer}>\r\n                <Grid container spacing={gridSpacing}>\r\n                    <Grid item xs zeroMinWidth sx={{ display: emailDetails ? { xs: 'none', sm: 'flex' } : 'flex' }}>\r\n                        <MainCard\r\n                            sx={{\r\n                                bgcolor: theme.palette.mode === 'dark' ? 'dark.main' : 'grey.50'\r\n                            }}\r\n                        >\r\n                            <Grid container spacing={gridSpacing}>\r\n                                <Grid item xs={12}>\r\n                                    <Grid container alignItems=\"center\" spacing={0.5}>\r\n                                        <Grid item>\r\n                                            <IconButton onClick={handleDrawerOpen} size=\"large\">\r\n                                                <MenuRoundedIcon />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <Grid container spacing={2} alignItems=\"center\" sx={{ flexWrap: 'nowrap' }}>\r\n                                                <Grid item>\r\n                                                    <Avatar alt={user.name} src={user.avatar && avatarImage(`./${user.avatar}`).default} />\r\n                                                </Grid>\r\n                                                <Grid item sm zeroMinWidth>\r\n                                                    <Grid container spacing={0} alignItems=\"center\">\r\n                                                        <Grid item xs={12}>\r\n                                                            <Typography variant=\"h4\" component=\"div\">\r\n                                                                {user.name}{' '}\r\n                                                                {user.online_status && <AvatarStatus status={user.online_status} />}\r\n                                                            </Typography>\r\n                                                        </Grid>\r\n                                                        <Grid item xs={12}>\r\n                                                            <Typography variant=\"subtitle2\">Last seen {user.lastMessage}</Typography>\r\n                                                        </Grid>\r\n                                                    </Grid>\r\n                                                </Grid>\r\n                                            </Grid>\r\n                                        </Grid>\r\n                                        <Grid item sm zeroMinWidth />\r\n                                        <Grid item>\r\n                                            <IconButton size=\"large\">\r\n                                                <CallTwoToneIcon />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <IconButton size=\"large\">\r\n                                                <VideoCallTwoToneIcon />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <IconButton onClick={handleUserChange} size=\"large\">\r\n                                                <ErrorTwoToneIcon />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <IconButton onClick={handleClickSort} size=\"large\">\r\n                                                <MoreHorizTwoToneIcon />\r\n                                            </IconButton>\r\n                                            <Menu\r\n                                                id=\"simple-menu\"\r\n                                                anchorEl={anchorEl}\r\n                                                keepMounted\r\n                                                open={Boolean(anchorEl)}\r\n                                                onClose={handleCloseSort}\r\n                                                anchorOrigin={{\r\n                                                    vertical: 'bottom',\r\n                                                    horizontal: 'right'\r\n                                                }}\r\n                                                transformOrigin={{\r\n                                                    vertical: 'top',\r\n                                                    horizontal: 'right'\r\n                                                }}\r\n                                            >\r\n                                                <MenuItem onClick={handleCloseSort}>Name</MenuItem>\r\n                                                <MenuItem onClick={handleCloseSort}>Date</MenuItem>\r\n                                                <MenuItem onClick={handleCloseSort}>Ratting</MenuItem>\r\n                                                <MenuItem onClick={handleCloseSort}>Unread</MenuItem>\r\n                                            </Menu>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                    <Divider sx={{ mt: theme.spacing(2) }} />\r\n                                </Grid>\r\n                                <PerfectScrollbar\r\n                                    style={{ width: '100%', height: 'calc(100vh - 440px)', overflowX: 'hidden', minHeight: 525 }}\r\n                                >\r\n                                    <CardContent>\r\n                                        <ChartHistory\r\n                                            theme={theme}\r\n                                            handleUserDetails={handleUserChange}\r\n                                            handleDrawerOpen={handleDrawerOpen}\r\n                                            user={user}\r\n                                            data={data}\r\n                                        />\r\n                                    </CardContent>\r\n                                </PerfectScrollbar>\r\n                                <Grid item xs={12}>\r\n                                    <Grid container spacing={1} alignItems=\"center\">\r\n                                        <Grid item>\r\n                                            <IconButton\r\n                                                ref={anchorElEmoji}\r\n                                                aria-describedby={emojiId}\r\n                                                onClick={handleOnEmojiButtonClick}\r\n                                                size=\"large\"\r\n                                            >\r\n                                                <MoodTwoToneIcon />\r\n                                            </IconButton>\r\n                                            <Popper\r\n                                                id={emojiId}\r\n                                                open={emojiOpen}\r\n                                                anchorEl={anchorElEmoji}\r\n                                                disablePortal\r\n                                                popperOptions={{\r\n                                                    modifiers: [\r\n                                                        {\r\n                                                            name: 'offset',\r\n                                                            options: {\r\n                                                                offset: [-20, 20]\r\n                                                            }\r\n                                                        }\r\n                                                    ]\r\n                                                }}\r\n                                            >\r\n                                                <ClickAwayListener onClickAway={handleCloseEmoji}>\r\n                                                    <MainCard elevation={8} content={false}>\r\n                                                        <Picker\r\n                                                            onEmojiClick={onEmojiClick}\r\n                                                            skinTone={SKIN_TONE_MEDIUM_DARK}\r\n                                                            disableAutoFocus\r\n                                                        />\r\n                                                    </MainCard>\r\n                                                </ClickAwayListener>\r\n                                            </Popper>\r\n                                        </Grid>\r\n                                        <Grid item xs zeroMinWidth>\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                label=\"Type a Message\"\r\n                                                value={message}\r\n                                                onChange={(e) => setMessage(e.target.value)}\r\n                                                onKeyPress={handleEnter}\r\n                                            />\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <IconButton size=\"large\">\r\n                                                <AttachmentTwoToneIcon />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                        <Grid item>\r\n                                            <IconButton color=\"primary\" onClick={handleOnSend} size=\"large\">\r\n                                                <SendTwoToneIcon />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </MainCard>\r\n                    </Grid>\r\n                    {emailDetails && (\r\n                        <Grid item sx={{ margin: { xs: '0 auto', md: 'initial' } }}>\r\n                            <Box sx={{ display: { xs: 'block', sm: 'none', textAlign: 'right' } }}>\r\n                                <IconButton onClick={handleUserChange} sx={{ mb: -5 }} size=\"large\">\r\n                                    <HighlightOffTwoToneIcon />\r\n                                </IconButton>\r\n                            </Box>\r\n                            <UserDetails user={user} />\r\n                        </Grid>\r\n                    )}\r\n                </Grid>\r\n            </Main>\r\n        </Box>\r\n    );\r\n};\r\n\r\nChatDrawer.propTypes = {\r\n    handleDrawerOpen: PropTypes.func,\r\n    openChatDrawer: PropTypes.bool,\r\n    setUser: PropTypes.func\r\n};\r\n\r\nexport default ChatMainPage;\r\n"]},"metadata":{},"sourceType":"module"}