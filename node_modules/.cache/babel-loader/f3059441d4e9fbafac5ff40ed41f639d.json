{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _defineProperty from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/johncoakley/development/projects/release_partner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";var _excluded=[\"children\",\"value\",\"index\"];import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';// material-ui\nimport{styled,useTheme}from'@mui/material/styles';import{Grid,Tab,Tabs,Typography}from'@mui/material';// project imports\nimport CartEmpty from'./CartEmpty';import Cart from'./Cart';import BillingAddress from'./BillingAddress';import Payment from'./Payment';import MainCard from'ui-component/cards/MainCard';import axios from'utils/axios';import{BACK_STEP,NEXT_STEP,REMOVE_PRODUCT,SET_STEP,SNACKBAR_OPEN,UPDATE_QUANTITY,SET_BILLING_ADDRESS,SET_SHIPPING_CHARGE}from'store/actions';import{gridSpacing}from'store/constant';// assets\nimport ShoppingCartTwoToneIcon from'@mui/icons-material/ShoppingCartTwoTone';import ApartmentIcon from'@mui/icons-material/Apartment';import CreditCardTwoToneIcon from'@mui/icons-material/CreditCardTwoTone';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledTab=styled(function(props){return/*#__PURE__*/_jsx(Tab,_objectSpread({},props));})(function(_ref){var theme=_ref.theme,customization=_ref.customization,value=_ref.value,cart=_ref.cart;return _defineProperty({color:cart.checkout.step>=value?theme.palette.success.dark:theme.palette.grey[600],minHeight:'auto',minWidth:250,padding:16,borderRadius:\"\".concat(customization.borderRadius,\"px\"),display:'flex',flexDirection:'row',alignItems:'flex-start',textAlign:'left',justifyContent:'flex-start','&:after':{backgroundColor:'transparent !important'},'&.Mui-selected':{color:theme.palette.primary.main,background:theme.palette.mode==='dark'?theme.palette.dark.main:theme.palette.grey[50]},'& > svg':{marginBottom:'0px !important',marginRight:10,marginTop:2,height:20,width:20}},theme.breakpoints.down('md'),{minWidth:'100%'});});// tabs option\nvar tabsOption=[{label:'User Profile',icon:/*#__PURE__*/_jsx(ShoppingCartTwoToneIcon,{}),caption:'Product Added'},{label:'Billing Address',icon:/*#__PURE__*/_jsx(ApartmentIcon,{}),caption:'Billing Information'},{label:'Payment',icon:/*#__PURE__*/_jsx(CreditCardTwoToneIcon,{}),caption:'Add & Update Card'}];// tabs\nfunction TabPanel(_ref3){var children=_ref3.children,value=_ref3.value,index=_ref3.index,other=_objectWithoutProperties(_ref3,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index,id:\"simple-tabpanel-\".concat(index),\"aria-labelledby\":\"simple-tab-\".concat(index)},other),{},{children:value===index&&/*#__PURE__*/_jsx(\"div\",{children:children})}));}// ==============================|| PRODUCT - CHECKOUT MAIN ||============================== //\nvar Checkout=function Checkout(){var theme=useTheme();var customization=useSelector(function(state){return state.customization;});var cart=useSelector(function(state){return state.cart;});var dispatch=useDispatch();var isCart=cart.checkout.products&&cart.checkout.products.length>0;var _useState=useState(cart.checkout.step>2?2:cart.checkout.step),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(cart.checkout.billing),_useState4=_slicedToArray(_useState3,2),billing=_useState4[0],setBilling=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),address=_useState6[0],setAddress=_useState6[1];var getAddress=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/address/list');case 2:response=_context.sent;setAddress(response.data.address);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getAddress(){return _ref4.apply(this,arguments);};}();useEffect(function(){getAddress();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var addAddress=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(addressNew){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/api/address/new',{data:addressNew});case 2:response=_context2.sent;setAddress(response.data.address);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function addAddress(_x){return _ref5.apply(this,arguments);};}();var editAddress=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(addressEdit){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post('/api/address/edit',{data:addressEdit});case 2:response=_context3.sent;setAddress(response.data.address);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function editAddress(_x2){return _ref6.apply(this,arguments);};}();var handleChange=function handleChange(newValue){setValue(newValue);dispatch({type:SET_STEP,step:newValue});};useEffect(function(){setValue(cart.checkout.step>2?2:cart.checkout.step);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[cart.checkout.step]);var removeProduct=function removeProduct(id){dispatch({type:REMOVE_PRODUCT,id:id});dispatch({type:SNACKBAR_OPEN,open:true,message:'Update Cart Success',variant:'alert',alertSeverity:'success'});};var updateQuantity=function updateQuantity(id,quantity){dispatch({type:UPDATE_QUANTITY,id:id,quantity:quantity});};var onNext=function onNext(){dispatch({type:NEXT_STEP});};var onBack=function onBack(){dispatch({type:BACK_STEP});};var billingAddressHandler=function billingAddressHandler(addressBilling){if(billing!==null||addressBilling!==null){if(addressBilling!==null){setBilling(addressBilling);}dispatch({type:SET_BILLING_ADDRESS,address:addressBilling!==null?addressBilling:billing});onNext();}else{dispatch({type:SNACKBAR_OPEN,open:true,message:'Please select delivery address',variant:'alert',alertSeverity:'error'});}};var handleShippingCharge=function handleShippingCharge(type){dispatch({type:SET_SHIPPING_CHARGE,charge:type});};return/*#__PURE__*/_jsx(MainCard,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:gridSpacing,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Tabs,{value:value,onChange:function onChange(e,newValue){return handleChange(newValue);},\"aria-label\":\"icon label tabs example\",variant:\"scrollable\",sx:{'& .MuiTabs-flexContainer':{borderBottom:'none'},'& .MuiTabs-indicator':{display:'none'},'& .MuiButtonBase-root + .MuiButtonBase-root':{position:'relative',overflow:'visible',ml:2,'&:after':{content:'\"\"',bgcolor:'#ccc',width:1,height:'calc(100% - 16px)',position:'absolute',top:8,left:-8}}},children:tabsOption.map(function(tab,index){return/*#__PURE__*/_jsx(StyledTab,{theme:theme,customization:customization,value:index,cart:cart,disabled:index>cart.checkout.step,icon:tab.icon,label:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"inherit\",children:tab.label}),/*#__PURE__*/_jsx(Typography,{component:\"div\",variant:\"caption\",sx:{textTransform:'capitalize'},children:tab.caption})]})},index);})})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsxs(TabPanel,{value:value,index:0,children:[isCart&&/*#__PURE__*/_jsx(Cart,{checkout:cart.checkout,onNext:onNext,removeProduct:removeProduct,updateQuantity:updateQuantity}),!isCart&&/*#__PURE__*/_jsx(CartEmpty,{})]}),/*#__PURE__*/_jsx(TabPanel,{value:value,index:1,children:/*#__PURE__*/_jsx(BillingAddress,{checkout:cart.checkout,onBack:onBack,billingAddressHandler:billingAddressHandler,address:address,addAddress:addAddress,editAddress:editAddress})}),/*#__PURE__*/_jsx(TabPanel,{value:value,index:2,children:/*#__PURE__*/_jsx(Payment,{checkout:cart.checkout,onBack:onBack,onNext:onNext,handleShippingCharge:handleShippingCharge})})]})]})});};export default Checkout;","map":{"version":3,"sources":["/Users/johncoakley/development/projects/release_partner/src/views/application/e-commerce/Checkout/index.js"],"names":["useState","useEffect","useDispatch","useSelector","styled","useTheme","Grid","Tab","Tabs","Typography","CartEmpty","Cart","BillingAddress","Payment","MainCard","axios","BACK_STEP","NEXT_STEP","REMOVE_PRODUCT","SET_STEP","SNACKBAR_OPEN","UPDATE_QUANTITY","SET_BILLING_ADDRESS","SET_SHIPPING_CHARGE","gridSpacing","ShoppingCartTwoToneIcon","ApartmentIcon","CreditCardTwoToneIcon","StyledTab","props","theme","customization","value","cart","color","checkout","step","palette","success","dark","grey","minHeight","minWidth","padding","borderRadius","display","flexDirection","alignItems","textAlign","justifyContent","backgroundColor","primary","main","background","mode","marginBottom","marginRight","marginTop","height","width","breakpoints","down","tabsOption","label","icon","caption","TabPanel","children","index","other","Checkout","state","dispatch","isCart","products","length","setValue","billing","setBilling","address","setAddress","getAddress","get","response","data","addAddress","addressNew","post","editAddress","addressEdit","handleChange","newValue","type","removeProduct","id","open","message","variant","alertSeverity","updateQuantity","quantity","onNext","onBack","billingAddressHandler","addressBilling","handleShippingCharge","charge","e","borderBottom","position","overflow","ml","content","bgcolor","top","left","map","tab","textTransform"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n// material-ui\r\nimport { styled, useTheme } from '@mui/material/styles';\r\nimport { Grid, Tab, Tabs, Typography } from '@mui/material';\r\n\r\n// project imports\r\nimport CartEmpty from './CartEmpty';\r\nimport Cart from './Cart';\r\nimport BillingAddress from './BillingAddress';\r\nimport Payment from './Payment';\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport axios from 'utils/axios';\r\nimport {\r\n    BACK_STEP,\r\n    NEXT_STEP,\r\n    REMOVE_PRODUCT,\r\n    SET_STEP,\r\n    SNACKBAR_OPEN,\r\n    UPDATE_QUANTITY,\r\n    SET_BILLING_ADDRESS,\r\n    SET_SHIPPING_CHARGE\r\n} from 'store/actions';\r\nimport { gridSpacing } from 'store/constant';\r\n\r\n// assets\r\nimport ShoppingCartTwoToneIcon from '@mui/icons-material/ShoppingCartTwoTone';\r\nimport ApartmentIcon from '@mui/icons-material/Apartment';\r\nimport CreditCardTwoToneIcon from '@mui/icons-material/CreditCardTwoTone';\r\n\r\nconst StyledTab = styled((props) => <Tab {...props} />)(({ theme, customization, value, cart }) => ({\r\n    color: cart.checkout.step >= value ? theme.palette.success.dark : theme.palette.grey[600],\r\n    minHeight: 'auto',\r\n    minWidth: 250,\r\n    padding: 16,\r\n    borderRadius: `${customization.borderRadius}px`,\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'flex-start',\r\n    textAlign: 'left',\r\n    justifyContent: 'flex-start',\r\n    '&:after': {\r\n        backgroundColor: 'transparent !important'\r\n    },\r\n    '&.Mui-selected': {\r\n        color: theme.palette.primary.main,\r\n        background: theme.palette.mode === 'dark' ? theme.palette.dark.main : theme.palette.grey[50]\r\n    },\r\n    '& > svg': {\r\n        marginBottom: '0px !important',\r\n        marginRight: 10,\r\n        marginTop: 2,\r\n        height: 20,\r\n        width: 20\r\n    },\r\n    [theme.breakpoints.down('md')]: {\r\n        minWidth: '100%'\r\n    }\r\n}));\r\n\r\n// tabs option\r\nconst tabsOption = [\r\n    {\r\n        label: 'User Profile',\r\n        icon: <ShoppingCartTwoToneIcon />,\r\n        caption: 'Product Added'\r\n    },\r\n    {\r\n        label: 'Billing Address',\r\n        icon: <ApartmentIcon />,\r\n        caption: 'Billing Information'\r\n    },\r\n    {\r\n        label: 'Payment',\r\n        icon: <CreditCardTwoToneIcon />,\r\n        caption: 'Add & Update Card'\r\n    }\r\n];\r\n\r\n// tabs\r\nfunction TabPanel({ children, value, index, ...other }) {\r\n    return (\r\n        <div role=\"tabpanel\" hidden={value !== index} id={`simple-tabpanel-${index}`} aria-labelledby={`simple-tab-${index}`} {...other}>\r\n            {value === index && <div>{children}</div>}\r\n        </div>\r\n    );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.any.isRequired,\r\n    value: PropTypes.any.isRequired\r\n};\r\n\r\n// ==============================|| PRODUCT - CHECKOUT MAIN ||============================== //\r\n\r\nconst Checkout = () => {\r\n    const theme = useTheme();\r\n    const customization = useSelector((state) => state.customization);\r\n    const cart = useSelector((state) => state.cart);\r\n    const dispatch = useDispatch();\r\n\r\n    const isCart = cart.checkout.products && cart.checkout.products.length > 0;\r\n\r\n    const [value, setValue] = useState(cart.checkout.step > 2 ? 2 : cart.checkout.step);\r\n    const [billing, setBilling] = useState(cart.checkout.billing);\r\n    const [address, setAddress] = useState([]);\r\n\r\n    const getAddress = async () => {\r\n        const response = await axios.get('/api/address/list');\r\n        setAddress(response.data.address);\r\n    };\r\n\r\n    useEffect(() => {\r\n        getAddress();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const addAddress = async (addressNew) => {\r\n        const response = await axios.post('/api/address/new', {\r\n            data: addressNew\r\n        });\r\n        setAddress(response.data.address);\r\n    };\r\n\r\n    const editAddress = async (addressEdit) => {\r\n        const response = await axios.post('/api/address/edit', {\r\n            data: addressEdit\r\n        });\r\n        setAddress(response.data.address);\r\n    };\r\n\r\n    const handleChange = (newValue) => {\r\n        setValue(newValue);\r\n        dispatch({ type: SET_STEP, step: newValue });\r\n    };\r\n\r\n    useEffect(() => {\r\n        setValue(cart.checkout.step > 2 ? 2 : cart.checkout.step);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [cart.checkout.step]);\r\n\r\n    const removeProduct = (id) => {\r\n        dispatch({ type: REMOVE_PRODUCT, id });\r\n        dispatch({\r\n            type: SNACKBAR_OPEN,\r\n            open: true,\r\n            message: 'Update Cart Success',\r\n            variant: 'alert',\r\n            alertSeverity: 'success'\r\n        });\r\n    };\r\n\r\n    const updateQuantity = (id, quantity) => {\r\n        dispatch({ type: UPDATE_QUANTITY, id, quantity });\r\n    };\r\n\r\n    const onNext = () => {\r\n        dispatch({ type: NEXT_STEP });\r\n    };\r\n\r\n    const onBack = () => {\r\n        dispatch({ type: BACK_STEP });\r\n    };\r\n\r\n    const billingAddressHandler = (addressBilling) => {\r\n        if (billing !== null || addressBilling !== null) {\r\n            if (addressBilling !== null) {\r\n                setBilling(addressBilling);\r\n            }\r\n\r\n            dispatch({ type: SET_BILLING_ADDRESS, address: addressBilling !== null ? addressBilling : billing });\r\n            onNext();\r\n        } else {\r\n            dispatch({\r\n                type: SNACKBAR_OPEN,\r\n                open: true,\r\n                message: 'Please select delivery address',\r\n                variant: 'alert',\r\n                alertSeverity: 'error'\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleShippingCharge = (type) => {\r\n        dispatch({ type: SET_SHIPPING_CHARGE, charge: type });\r\n    };\r\n\r\n    return (\r\n        <MainCard>\r\n            <Grid container spacing={gridSpacing}>\r\n                <Grid item xs={12}>\r\n                    <Tabs\r\n                        value={value}\r\n                        onChange={(e, newValue) => handleChange(newValue)}\r\n                        aria-label=\"icon label tabs example\"\r\n                        variant=\"scrollable\"\r\n                        sx={{\r\n                            '& .MuiTabs-flexContainer': {\r\n                                borderBottom: 'none'\r\n                            },\r\n                            '& .MuiTabs-indicator': {\r\n                                display: 'none'\r\n                            },\r\n                            '& .MuiButtonBase-root + .MuiButtonBase-root': {\r\n                                position: 'relative',\r\n                                overflow: 'visible',\r\n                                ml: 2,\r\n                                '&:after': {\r\n                                    content: '\"\"',\r\n                                    bgcolor: '#ccc',\r\n                                    width: 1,\r\n                                    height: 'calc(100% - 16px)',\r\n                                    position: 'absolute',\r\n                                    top: 8,\r\n                                    left: -8\r\n                                }\r\n                            }\r\n                        }}\r\n                    >\r\n                        {tabsOption.map((tab, index) => (\r\n                            <StyledTab\r\n                                theme={theme}\r\n                                customization={customization}\r\n                                value={index}\r\n                                cart={cart}\r\n                                disabled={index > cart.checkout.step}\r\n                                key={index}\r\n                                icon={tab.icon}\r\n                                label={\r\n                                    <Grid container direction=\"column\">\r\n                                        <Typography variant=\"subtitle1\" color=\"inherit\">\r\n                                            {tab.label}\r\n                                        </Typography>\r\n                                        <Typography component=\"div\" variant=\"caption\" sx={{ textTransform: 'capitalize' }}>\r\n                                            {tab.caption}\r\n                                        </Typography>\r\n                                    </Grid>\r\n                                }\r\n                            />\r\n                        ))}\r\n                    </Tabs>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <TabPanel value={value} index={0}>\r\n                        {isCart && (\r\n                            <Cart checkout={cart.checkout} onNext={onNext} removeProduct={removeProduct} updateQuantity={updateQuantity} />\r\n                        )}\r\n                        {!isCart && <CartEmpty />}\r\n                    </TabPanel>\r\n                    <TabPanel value={value} index={1}>\r\n                        <BillingAddress\r\n                            checkout={cart.checkout}\r\n                            onBack={onBack}\r\n                            billingAddressHandler={billingAddressHandler}\r\n                            address={address}\r\n                            addAddress={addAddress}\r\n                            editAddress={editAddress}\r\n                        />\r\n                    </TabPanel>\r\n                    <TabPanel value={value} index={2}>\r\n                        <Payment checkout={cart.checkout} onBack={onBack} onNext={onNext} handleShippingCharge={handleShippingCharge} />\r\n                    </TabPanel>\r\n                </Grid>\r\n            </Grid>\r\n        </MainCard>\r\n    );\r\n};\r\n\r\nexport default Checkout;\r\n"]},"metadata":{},"sourceType":"module"}